# AI-PDF Server Environment Variables
# Copy this file to .env and fill in your values
# NEVER commit .env files to version control

# ============================================================================
# REQUIRED - Server Settings
# ============================================================================
PORT=8000
HOST=0.0.0.0
DEBUG=false
ENVIRONMENT=production

# ============================================================================
# REQUIRED - OpenAI Configuration
# ============================================================================
# OpenAI API key for embeddings, LLM, and TTS
OPENAI_API_KEY=sk-your-openai-api-key-here
# OpenAI Realtime API key (same as above, but kept separate for clarity)
OPENAI_REALTIME_API_KEY=sk-your-openai-api-key-here

# Model Configuration
EMBEDDING_MODEL=text-embedding-3-small
LLM_MODEL=gpt-4o
EMBEDDING_DIMENSIONS=1536

# ============================================================================
# REQUIRED - Supabase Authentication
# ============================================================================
# JWT secret must match gateway and user-service
SUPABASE_JWT_SECRET=your-jwt-secret-here-must-match-other-services

# ============================================================================
# REQUIRED - CORS Configuration
# ============================================================================
# Comma-separated list of allowed origins
# NEVER use "*" in production
CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# ============================================================================
# RAG Configuration
# ============================================================================
CHUNK_SIZE=500
CHUNK_OVERLAP=50
TOP_K_RESULTS=5
CONFIDENCE_THRESHOLD=0.7

# RAG Strict Mode (Voice Calls)
RAG_HARD_REJECT_ENABLED=true
RAG_MIN_CONFIDENCE_FOR_VOICE=0.7
RAG_REFUSAL_MESSAGE=I cannot find information about that in the uploaded document. Please ask something related to the document content.

# ============================================================================
# Voice Call Session Settings
# ============================================================================
VOICE_SESSION_TIMEOUT_MINUTES=5
VOICE_SESSION_MAX_DURATION_MINUTES=60
VOICE_MAX_CONCURRENT_CALLS_PER_USER=1
VOICE_MAX_AUDIO_BYTES_PER_SECOND=48000

# ============================================================================
# Exhaustive Extraction Settings
# ============================================================================
ENABLE_EXHAUSTIVE_EXTRACTION=true
MAX_EXTRACTION_TOKENS=8000
EXTRACTION_MAX_CHUNKS=200
EXTRACTION_BATCH_SIZE=10

# ============================================================================
# Highlight Synchronization Settings
# ============================================================================
ENABLE_HIGHLIGHT_SYNC=true
HIGHLIGHT_MERGE_THRESHOLD=0.9

# ============================================================================
# Blockchain Integration (OPTIONAL)
# ============================================================================
# Set to true only if blockchain is properly configured
ENABLE_BLOCKCHAIN=false

# If ENABLE_BLOCKCHAIN=true, these are REQUIRED:
BLOCKCHAIN_RPC_URL=https://polygon-rpc.com
BLOCKCHAIN_CONTRACT_ADDRESS=0x0000000000000000000000000000000000000000
# NEVER store private key in plain text - use KMS or secret manager
BLOCKCHAIN_PRIVATE_KEY=your-private-key-here-use-kms-in-production
BLOCKCHAIN_CHAIN_ID=137
BLOCKCHAIN_GAS_LIMIT=100000

# Merkle Batching (if enabled)
ENABLE_MERKLE_BATCHING=true
MERKLE_BATCH_SIZE=10

# ============================================================================
# Storage Paths
# ============================================================================
# FAISS index storage path (explicit path recommended)
FAISS_INDEX_PATH=./data/indices

# ============================================================================
# Distributed Services (RECOMMENDED for Production)
# ============================================================================
# Redis URL for distributed session storage
SESSION_REDIS_URL=redis://localhost:6379/0

# Redis URL for distributed rate limiting
RATE_LIMIT_REDIS_URL=redis://localhost:6379/1

# ============================================================================
# Monitoring & Observability (RECOMMENDED)
# ============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json

# Error Tracking (Sentry)
SENTRY_DSN=https://your-sentry-dsn-here

# Metrics (Prometheus)
PROMETHEUS_PORT=9090

# ============================================================================
# Production Security Notes
# ============================================================================
# 1. Rotate all API keys and secrets before production deployment
# 2. Use secret management service (AWS Secrets Manager, HashiCorp Vault)
# 3. Never commit .env files to version control
# 4. Set DEBUG=false and ENVIRONMENT=production in production
# 5. Use specific CORS_ORIGINS, never "*"
# 6. Store blockchain private key in KMS, not in .env file
# 7. Enable monitoring and alerting (Sentry, Prometheus)
