# API Gateway Environment Variables
# Copy this file to .env and fill in your values
# NEVER commit .env files to version control

# ============================================================================
# REQUIRED - App Settings
# ============================================================================
APP_NAME="API Gateway"
APP_VERSION="1.0.0"
DEBUG=false
ENVIRONMENT=production

# ============================================================================
# REQUIRED - Server Settings
# ============================================================================
HOST=0.0.0.0
PORT=8080

# ============================================================================
# REQUIRED - Backend Service URLs
# ============================================================================
PDF_SERVICE_URL=http://localhost:8000
USER_SERVICE_URL=http://localhost:8001

# ============================================================================
# REQUIRED - JWT Validation
# ============================================================================
# JWT secret must match user-service
# Used for validating tokens from User-Service
SUPABASE_JWT_SECRET=your-jwt-secret-here-must-match-user-service
JWT_ALGORITHM=HS256

# ============================================================================
# REQUIRED - CORS Configuration
# ============================================================================
# Comma-separated list of allowed origins
# NEVER use "*" in production
CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# ============================================================================
# Timeouts (seconds)
# ============================================================================
REQUEST_TIMEOUT=60
CONNECT_TIMEOUT=10

# ============================================================================
# Rate Limiting
# ============================================================================
# Per-IP rate limits
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60

# Redis URL for distributed rate limiting (RECOMMENDED for production)
RATE_LIMIT_REDIS_URL=redis://localhost:6379/2

# ============================================================================
# Circuit Breaker (RECOMMENDED)
# ============================================================================
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_RECOVERY_TIMEOUT=60

# ============================================================================
# Health Checks
# ============================================================================
HEALTH_CHECK_INTERVAL=30

# ============================================================================
# Monitoring & Observability (RECOMMENDED)
# ============================================================================
LOG_LEVEL=INFO

# Error Tracking (Sentry)
SENTRY_DSN=https://your-sentry-dsn-here

# Metrics (Prometheus)
PROMETHEUS_PORT=9091

# ============================================================================
# Production Security Notes
# ============================================================================
# 1. Set DEBUG=false and ENVIRONMENT=production in production
# 2. Use specific CORS_ORIGINS, never "*"
# 3. Enable distributed rate limiting with Redis
# 4. Enable circuit breakers for resilience
# 5. Monitor gateway health and backend service health
